---
title: "MacOSのパッケージ管理「Homebrew」を使うとき"
date: "2021-08-03T20:52:07Z"
updateDate: ""
category: "dev_env"
tags: "dev-env"
description: "MacOSのパッケージ管理ツール　Homebrewについて"
emoji: "🙂"
topImage: ""
---

# 今回の目的

<br />{" "}

- Homebrew の本質を理解することが目的

<br />{" "}

# 使用ケース

<br />{" "}

- MacOS にソフトウェアをインストールしたあと、運用を容易にしたいとき

<br />{" "}

# 結論

<br />{" "}

- CUI で MacOS 上にソフトウェアをインストールすることができる
- インストールしたソフトウェアのアップグレード、ダウングレード、アンインストールが簡単にできる

<br />{" "}

# Homebrew とは

<br />{" "}

- MacOS 上で動作するパッケージ管理ツール
- Homebrew を用いて様々なパッケージをインストールすることができる
- 少し違うかもしれないけど、iPhone でいう AppStore(GUI) のようなイメージ

<br />{" "}

# Homebrew を使う理由

<br />{" "}

- Homebrew の本質はソフトウェアをインストールすること

<br />{" "}

- ▼ パッケージ管理ツールを使わない場合

<br />{" "}

- 通常ソフトウェアをインストールする場合、公式から直接インストーラーを  
  ダウンロードしてインストールするのが一般的
- 公式から直接ダウンロードしてインストールするやり方だと、
  新しいバージョンが出た時には再度ダウンロード、インストールする必要がある
  また前のバージョンの関連するファイルを削除したほうが良く、
  削除しようとした時どれが関連するファイルなのか見分けることが難しく、時間がかかる

<br />{" "}

- ▼ パッケージ管理ツールを使う場合

<br />{" "}

- 公式からインストーラーをダウンロードする必要がない
- Homebrew を通してソフトウェアのインストール、アンインストールはもちろん、
  アップグレード、ダウングレードも CUI を使って簡単にできる
- アンインストールするときには関連するファイルもすべて端末から削除することができるため、時間がかからない
- 要するに後述する保存場所、PATH を通すことで、ソフトウェアの保存場所、PATH のよる関連ファイルを
  管理してくれるので、ユーザーが覚える必要がなく、考えるコストが削減される

<br />{" "}

# Homebrew インストール

<br />{" "}

- Homebrew がインストーラー大窓口のようなイメージ
- インストール実行

```ターミナル
% /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

- インストール確認

```ターミナル
% brew -v

# => バージョンが表示されない場合は後述するPATHを通すを参考にする
```

- Homebrew 3.1.9 (数字は何でも良い)と返り値が出力されればインストール完了

<br />{" "}

# Homebrew 使い方

<br />{" "}

- インストールしたいパッケージ（ソフトウェア）ありき
- パッケージ（ソフトウェア）をインストールする

```ターミナル
$ brew install <パッケージ名>
```

<br />{" "}

- インストールされているパッケージ（ソフトウェア）一覧を確認する

```ターミナル
$ brew list
```

<br />{" "}

- パッケージ（ソフトウェア）をアンインストールする

```ターミナル
$ brew remove <パッケージ名>
```

<br />{" "}

- パッケージ（ソフトウェア）をアップグレードする

```ターミナル
% brew upgrade
# すべてのパッケージをアップグレード

% brew upgrade <パッケージ名>
# 個別のパッケージをアップグレード
```

<br />{" "}

- パッケージ（ソフトウェア）をダウングレードする

- brew upgrade または旧バージョンが提供されている場合
- 上記 2 つに該当しない場合、Homebrew が Fomula(式)を管理している ruby スクリプトを集めたディレクトリで ruby スクリプトを戻す

<br />{" "}

# Homebrew でインストールしたパッケージの保存先

<br />{" "}

- Homebrew のパッケージインストール先は、以下のとおり

<br />{" "}

- コマンド実体は、/usr/local/Cellar
- コマンドのエイリアスは、/usr/local/bin
- ※エイリアスとは
- ・本体ファイルと同じ役割を果たすもの
- ・本体を起動させるためのショートカットみたいなもの
  　（それ自体をクリックしても元となる本体が起動するだけ）

<br />{" "}

# Homebrew のインストール先まで PATH を通す

<br />{" "}

- Homebrew をプログラム名で実行できるように PATH に値を設定する

```ターミナル
% echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> /Users/r/.zprofile
% eval "$(/opt/homebrew/bin/brew shellenv)"

# => 以上はMac M1の場合
```

<br />{" "}

# Homebrew で使用するその他コマンド

<br />{" "}

| command                    | effect                                                   |
| -------------------------- | -------------------------------------------------------- |
| % brew                     | サブコマンドの表示                                       |
| % brew search              | Homebrew のパッケージを一覧表示                          |
| % brew search <キーワード> | キーワードが含まれる brew のパッケージを検索             |
| % brew info                | Homebrew でインストールした統計の情報を表示              |
| % brew info <パッケージ名> | パッケージについての情報を表示                           |
| % brew update              | Homebrew とすべてのパッケージ定義(Formula)をアップデート |
| % brew list                | インストールされているパッケージを表示                   |
| % brew doctor              | Homebrew の問題をチェック                                |
| % brew commands            | Homebrew のコマンドの一覧を表示                          |
| % brew config              | Homebrew システム構成を表示                              |

<br />{" "}

# Homebrew-cask とは

<br />{" "}

- GUI のパッケージを Homebrew を使ってインストールすることができる便利なやつ
- 例えば、google chrome をインストールしたいときに、通常なら
- google chrome のダウンロードページに行って、zip ファイルをダウンロード、
- 解凍して、インストールするのが一般的だが、homebrew-cask を使えば以下のとおり

  <br />{" "}

- 使い方 ※ GUI のパッケージである「google chrome」をインストール

```ターミナル
% brew cask install goole-chrome
```

```ターミナル
% brew cask install <GUIツールの名前>
```

<br />{" "}

# まとめ

<br /> 　

- Homebrew を使うことで、開発環境を簡単に構築、運用することができるので
- Mac ユーザーは初期設定時に必ず使ったほうが良いと思った

<br /> 　 　

# 次回改善点

<br />　 　 - Homebrew-caskをインストールするメリット【PCの引越しが楽になります】
- Homebrew でダウングレードする方法をもう少し深堀りする - Homebrew-cask でインストールできる
GUI のパッケージをもう少し深堀りする

<br />{" "}

# 参考サイト

<br />{" "}

- 記録なし
