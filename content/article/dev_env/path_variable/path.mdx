---
title: "「PATHを通す」とき"
date: "2021-08-07T17:14:16Z"
updateDate: ""
category: "pc"
tags: "pc"
description: "PATHを通すことについて理解する"
emoji: "🙂"
topImage: ""
---

<br />{" "}

# 今回の目的

<br />{" "}

- PATH を通すことを理解することが目的

<br /> 　

# 使用ケース

<br />{" "}

- シェルから実行ファイル(プログラム)をプログラム名だけで実行できるように設定したいとき

<br />{" "}

# 結論

<br />{" "}

- PATH という環境変数（$PATH ここを探すぜリスト）に値を設定すること
- (PATH を通すこと)で 「プログラム名だけでプログラムを実行できるようにしてください」
- という値を追加して、実行ファイル(プログラム)を素早く起動する事ができる

<br />{" "}

# PATH とは

<br />{" "}

- ファイルやフォルダの場所と名前を示す情報
- フルパスと$PATH 変数がある

<br /> 　

# 実行ファイル とは

<br />{" "}

- プログラムの本体
- プログラムは本来、フルパスを指定することで実行できる

<br />{" "}

# 環境変数とは

<br />{" "}

- OS 上で動くプロセスがデータを共有するための箱 = ローカル環境すべてで使える変数

<br />{" "}

# PATH を通すとは

<br />{" "}

- 環境変数（$PATH）の記述を変えて、コマンド検索パスを追加すること
- そもそも OS は上記で説明したフルパスを指定しない限り、
- 環境変数($PATH) に登録しているパスに存在するプログラムだけを探す
- 理由は PC にはファイルが幾つか存在し、毎度すべてを検索するとコストがかかりすぎるから
- 環境変数($PATH)に登録することで、必要とするプログラムの実行ファイルがターミナルから
- プログラム名だけで実行できるようになる

<br />{" "}

# PATH を通す手順その 1 環境変数に設定されている$PATH 変数の参照

<br />{" "}

- OS すべての環境変数参照 ▼

<br />{" "}

| OS      | 場所               | 　コマンド   |
| ------- | ------------------ | ------------ |
| windows | コマンドプロンプト | 　 C:¥ set   |
| mac     | ターミナル         | 　 % env     |
| Unix    | ターミナル         | 　$ printenv |

<br />{" "}

- ＄ PATH 変数のみ参照 ▼

<br />{" "}

| OS      | shell              | 　 command        |
| ------- | ------------------ | ----------------- |
| windows | コマンドプロンプト | 　 C:¥> PATH      |
| mac     | ターミナル         | 　 % echo $PATH   |
| Unix    | ターミナル         | 　$ printenv PATH |

<br />{" "}

# PATH を通す手順その 2 実行ファイル(プログラム)が入っているフォルダをもとに考える

<br /> 　

- PATH が通っていないときの解決策は２つ ▼

<br />{" "}

- ① 実行ファイル(プログラム)が入っているフォルダへ PATH を通す

  - 通常、単一のアプリケーションのために PATH を追加することはしない
  - ① を実行するのは大量のプログラムがそのフォルダに入っている場合
  - 例えば Python の Anaconda は、その中に python や多くのパッケージが入っているので PATH を通す

  <br />{" "}

- ② すでに PATH が通っているフォルダに実行ファイル(プログラム)を移動させる
  - ② については、「必ずシェルから起動するもの」であればそれで良い
  - GUI から起動することもあるアプリケーションであれば、/Applications/に入れておくのがベター

<br />{" "}

# PATH を通す手順その 3 すでに PATH が通っているところにシンボリックリンクを貼る

<br /> 　

- 上記 ① のような単一のアプリケーションなので PATH をわざわざ通すほどでもなく、
- 上記 ② のようにプログラムも移動させたくないケース ▼

<br />{" "}

- ③ すでに PATH が通っているところにシンボリックリンクを貼る

<br />{" "}

- シンボリックリンク(Symbolic link: 通称 symlink)というのは、
- 物理的にはコピーはしないけど、参照先としてリンクを貼るもの(プログラミングでいう参照渡しみたいな感じ)
- 例えば「 /usr/local/bin の配下に sample(対象の実行ファイル) というものはないけど、
- /usr/local/bin/sample を求められたら /Applications/Sublime Text.app/Contents/SharedSupport/bin/sample
- を参照してね」という風に，参照先を指定することができる

<br />{" "}

- 上記 ③ は物理的に実行ファイル(プログラム)を動かすことなく、PATH を通すことができる
- これはよく使う技なので覚えておくと良い
- 実装参考サイト →https://datawokagaku.com/what_is_path/

<br />{" "}

# OS 毎の PATH を通す方法　簡易まとめ(Mac は上記手順参考)

<br />{" "}

| 順序 | windows                  | Unix                                     |
| ---- | ------------------------ | ---------------------------------------- |
| 1    | .exe ファイル            | $ printenv PATH                          |
| 2    | フルパス                 | $PATH 変数に存在しないことを確認         |
| 3    | path 環境変数設定        | 実行ファイルのパスを$PATH に追加         |
| 4    | path にフルパス貼付け    | export PATH="$PATH:「実行ファイルパス」" |
| 5    | OS の Ver なりに設定     | ターミナル                               |
| 6    | 再起動                   | $ 実行ファイル名 -v                      |
| 7    | コマンドプロンプト       |                                          |
| 8    | C:¥> 実行ファイル名 -v」 |                                          |

<br />{" "}

# まとめ (Mac)

<br />{" "}

- OS は PATH が通っているところしかコマンドを探しに行かない
- PATH が通っているところ＝環境変数の $PATH 変数に指定されているパス
- $PATH を更新するには ~/.bash_profile などのシェルを開くたびに実行される設定ファイルに export する
- 大抵の場合は、$PATH をいじるのではなくて，Symlink を貼ることで解決する
- $ls -s <target_path> <link_path> で，Symlink を貼る
- アクセス権のエラーが出た場合は$sudo chmod コマンドで所有者を変更

<br />{" "}

# 次回改善点

<br />{" "}

- windows, Unix の＄ PATH 参照渡しが存在するか調べる
- PATH を通すケースを記録していく

<br />{" "}

# 参考サイト

<br />{" "}

- https://datawokagaku.com/what_is_path/
-
- windows→https://atmarkit.itmedia.co.jp/ait/articles/1805/11/news035.html
- Mac→https://qiita.com/sta/items/63e1048025d1830d12fd
- Unix→https://qiita.com/Naggi-Goishi/items/2c49ea50602ea80bf015
